<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
  <h:head>
    <meta charset="utf-8"></meta>
  </h:head>
  <h:body>
    <div class="main-container">
      <div class="pull-left" style="padding-left: 50px;">
        <h:form id="menuGestorForm">
          <p:commandButton value="Calcular campa単as" icon="ui-icon fa fa-briefcase fa-2x" actionListener="#{cuentasGestorBean.cargar()}" style="width: 200px; height: 100px;" update="formCuentasGestor, menuGestorForm" rendered="#{!cuentasGestorBean.habilitaCampanas}" />
          <div align="center" class="grey-container" style="width: 200px;">
            <a href="progresoGestor.xhtml" class="shortcut-link">
              <span class="shortcut-icon">
                <i class="fa fa-area-chart fa-2x"></i>
              </span>
              <span class="text">Ver progreso del dia</span>
            </a>
            <hr />
            <a href="progresoGestor.xhtml" class="shortcut-link">
              <span class="shortcut-icon">
                <i class="fa fa-usd fa-2x"></i>
                <span class="shortcut-alert">
                  <p:outputLabel value="#{progresoTotalGestorBean.pagosPendientesHoy()}" />
                </span>
              </span>
              <span class="text">Ver pagos quincena</span>
            </a>
          </div>
        </h:form>
      </div>
      <div class="pull-right" style="padding-right: 100px;">
        <h:form id="formCuentasGestor">
          <p:contextMenu for="campanasGestor" style="width:200px;">
            <p:menuitem value="Gestionar campa単a" icon="ui-icon-star" actionListener="#{cuentasGestorBean.preparaCampana()}" />
            <p:menuitem value="Gestionar quebrantos" icon="ui-icon-flag" actionListener="#{cuentasGestorBean.preparaCampanaQuebranto()}" update=":growl" />
          </p:contextMenu>
          <p:dataTable id="campanasGestor" var="l" value="#{cuentasGestorBean.listaCreditosCampanas}" selectionMode="single" selection="#{cuentasGestorBean.seleccion}" rowKey="#{l.idCampana}" emptyMessage="No existen campa単as disponibles." style="width: 1000px;" rendered="#{cuentasGestorBean.habilitaCampanas}">
            <p:column headerText="Campa単a" style="width:360px;">
              <h:outputText value="#{l.nombreCampana}" />
            </p:column>
            <p:column headerText="Estatus" style="width:100px;">
              <h:outputText value="#{cuentasGestorBean.verificarCampanaEnCurso(l)}" />
            </p:column>
            <p:column headerText="Progreso" style="width:80px;">
              <h:outputText value="#{l.progresoCampana} / #{l.cuentasEnCampana}" style="float: right;" />
            </p:column>
            <p:column headerText="Cuentas" style="width:80px;">
              <h:outputText value="#{l.cuentasEnCampana}" />
            </p:column>
            <p:column headerText="V" style="width:40px; color: #04B404;">
              <h:outputText value="#{l.verdes}" />
            </p:column>
            <p:column headerText="A" style="width:40px; color: #F3CE85;">
              <h:outputText value="#{l.amarillas}" />
            </p:column>
            <p:column headerText="R" style="width:40px; color: #EC1010;">
              <h:outputText value="#{l.rojas}" />
            </p:column>
            <p:column headerText="QV" style="width:40px; color: #04B404;">
              <h:outputText value="#{l.verdesQuebranto}" />
            </p:column>
            <p:column headerText="QA" style="width:40px; color: #F3CE85;">
              <h:outputText value="#{l.amarillasQuebranto}" />
            </p:column>
            <p:column headerText="QR" style="width:40px; color: #EC1010;">
              <h:outputText value="#{l.rojasQuebranto}" />
            </p:column>
            <p:column headerText="Recibidas" style="width:80px;">
              <h:outputText value="#{l.nuevasEnCampana}" />
            </p:column>
            <f:facet name="footer">
              <p:commandButton value="Actualizar" icon="ui-icon-refresh" actionListener="#{cuentasGestorBean.actualizarCampanas()}" process="@this" update="formCuentasGestor" />
            </f:facet>
          </p:dataTable>
        </h:form>
      </div>
    </div>
    <!-- DIALOGO BARRA DE CARGA -->
    <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" >
      <p:outputLabel value="Espere por favor..."/>
      <br />
      <div align="center">
        <p:graphicImage library="img" name="loadingBarra.gif" />
      </div>
    </p:dialog>
  </h:body>
</html>