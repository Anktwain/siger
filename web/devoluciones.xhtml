<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns="http://www.w3.org/1999/xhtml">
  <h:head>
    <meta charset="utf-8"></meta>
    <title>SigerWeb - Bandeja de devoluci&oacute;n</title>
  </h:head> 
  <h:body>
    <p:growl id="growl" showDetail="true" sticky="true" />
    <!-- Overlay Div -->
    <div id="overlay" class="transparent" style="display: none"></div>
    <ui:include src="barraSuperior.xhtml" />
    <ui:include src="barraLateral.xhtml" />
    <div id="main-container">
      <div id="breadcrumb">
        <ul class="breadcrumb">
          <li>
            <i class="fa fa-home">
            </i>
            <a href="#{indexBean.vista}">Inicio</a>
          </li>
          <li class="active">
            Devolucion
          </li>
        </ul>
      </div>
      <div class="main-header clearfix">
        <div class="page-title">
          <h3 class="no-margin">Devoluciones</h3>
          <span>Consulte informaci&oacute;n de los creditos devueltos, apruebe o rechaze creditos enviados a devolucion por el banco o los gestores</span>
          <span>Solicite a el banco conservar creditos que le han sido retirados a su despacho</span>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-tab clearfix">
          <ul class="tab-bar">
            <li><a href="#pestanaRetirados" data-toggle="tab" title="Click aqui si desea ver los creditos retirados por el banco"><h2><i class="fa fa-minus"></i> Creditos retirados por el banco</h2></a></li>
            &nbsp;
            <li><a href="#pestanaBandeja" data-toggle="tab" title="Click aqui si desea ver los creditos pendientes de devolucion"><h2><i class="fa fa-reply"></i> Bandeja de devolucion</h2></a></li>
            &nbsp;
            <li><a href="#pestanaDevueltos" data-toggle="tab" title="Click aqui si desea ver los creditos que ya estan devueltos"><h2><i class="fa fa-ban"></i> Creditos devueltos</h2></a></li>
          </ul>
        </div>
        <div class="panel-body">
          <div class="tab-content">
            <!-- AQUI VA LA TABLA QUE MUESTRE LOS CREDITOS RETIRADOS POR EL BANCO -->
            <div class="tab-pane fade" id="pestanaRetirados">
              <h:form id="formRetirados">
                <p:contextMenu for="retirados" style="width:200px;">
                  <p:menuitem value="Aprobar devolucion" icon="ui-icon-check" actionListener="#{devolucionBean.aprobar(devolucionBean.retiradosSeleccionados)}" update="growl, retirados, formBandeja:bandeja" />
                  <p:menuitem value="Solicitar conservacion" icon="ui-icon-mail-closed" actionListener="#{devolucionBean.conservar(devolucionBean.retiradosSeleccionados)}" update="growl, retirados, formBandeja:bandeja" />
                </p:contextMenu>
                <p:dataTable id="retirados" var="ret" value="#{devolucionBean.listaRetirados}" rowKey="#{ret.numeroCredito}" selection="#{devolucionBean.retiradosSeleccionados}" emptyMessage="No existen creditos retirados por el banco."  paginator="true" rows="15" paginatorPosition="bottom">
                  <p:column selectionMode="multiple" style="width:35px;text-align:center" />
                  <p:column headerText="Fecha devolucion" style="width:250px;" > 
                    <h:outputText value="#{ret.fecha}"/>
                  </p:column>
                  <p:column headerText="Estatus" style="width:150px;" > 
                    <h:outputText value="#{ret.estatus}"/>
                  </p:column>
                  <p:column headerText="Credito" style="width:150px;" > 
                    <h:outputText value="#{ret.numeroCredito}"/>
                  </p:column>
                  <p:column headerText="Deudor"> 
                    <h:outputText value="#{ret.nombreRazonSocial}"/>
                  </p:column>
                  <f:facet name="footer">
                    <p:commandButton value="Aprobar devolucion seleccionados" icon="ui-icon-check" actionListener="#{devolucionBean.aprobar(devolucionBean.retiradosSeleccionados)}" update="growl, retirados, formBandeja:bandeja" />
                    <p:commandButton value="Solicitar conservacion seleccionados" icon="ui-icon-mail-closed" actionListener="#{devolucionBean.conservar(devolucionBean.retiradosSeleccionados)}" update="growl, retirados, formBandeja:bandeja" />
                  </f:facet>
                </p:dataTable>
              </h:form>
            </div>
            <!-- AQUI VA LA TABLA QUE MUESTRE LOS CREDITOS EN BANDEJA DE DEVOLUCION -->
            <div class="tab-pane fade" id="pestanaBandeja">
              <h:form id="formBandeja">
                <p:contextMenu for="bandeja" style="width:200px;">
                  <p:menuitem value="Aprobar devolucion" icon="ui-icon-check" actionListener="#{devolucionBean.aprobar(devolucionBean.bandejaSeleccionados)}" update="growl, bandeja, formDevueltos:devueltos" />
                  <p:menuitem value="Rechazar devolucion" icon="ui-icon-alert" actionListener="#{devolucionBean.rechazar(devolucionBean.bandejaSeleccionados)}" update="growl, bandeja" />
                </p:contextMenu>
                <p:dataTable id="bandeja" var="devo" value="#{devolucionBean.listaDevoluciones}" rowKey="#{devo.numeroCredito}" selection="#{devolucionBean.bandejaSeleccionados}" emptyMessage="No existen creditos en bandeja de devolucion."  paginator="true" rows="15" paginatorPosition="bottom">
                  <p:column selectionMode="multiple" style="width:35px;text-align:center"/>
                  <p:column headerText="Fecha devolucion" style="width:250px;" > 
                    <h:outputText value="#{devo.fecha}"/>
                  </p:column>
                  <p:column headerText="Estatus" style="width:200px;" > 
                    <h:outputText value="#{devo.estatus}"/>
                  </p:column>
                  <p:column headerText="Credito" style="width:150px;" > 
                    <h:outputText value="#{devo.numeroCredito}"/>
                  </p:column>
                  <p:column headerText="Deudor"> 
                    <h:outputText value="#{devo.nombreRazonSocial}"/>
                  </p:column>
                  <p:column headerText="Motivo" style="width:250px;" > 
                    <h:outputText value="#{devo.concepto}"/>
                  </p:column>
                  <p:column headerText="Solicitante" style="width:100px;" > 
                    <h:outputText value="#{devo.solicitante}"/>
                  </p:column>
                  <f:facet name="footer">
                    <p:commandButton value="Aprobar devolucion seleccionados" icon="ui-icon-check" actionListener="#{devolucionBean.aprobar(devolucionBean.bandejaSeleccionados)}" update="growl, bandeja, formDevueltos:devueltos" />
                    <p:commandButton value="Rechazar devolucion seleccionados" icon="ui-icon-alert" actionListener="#{devolucionBean.rechazar(devolucionBean.bandejaSeleccionados)}" update="growl, bandeja" />
                  </f:facet>
                </p:dataTable>
              </h:form>
            </div>
            <!-- AQUI VA LA TABLA QUE MUESTRE LOS CREDITOS DEVUELTOS EN EL SISTEMA -->
            <div class="tab-pane fade" id="pestanaDevueltos">
              <h:form id="formDevueltos">
                <p:contextMenu for="devueltos" style="width:200px;">
                  <p:menuitem value="Reactivar" icon="ui-icon-refresh" actionListener="#{devolucionBean.reactivar()}" update="growl, devueltos" />
                </p:contextMenu>
                <p:dataTable id="devueltos" var="dev" value="#{devolucionBean.listaDevueltos}" rowKey="#{dev.numeroCredito}" selection="#{devolucionBean.devolucionesSeleccionadas}" emptyMessage="No existen creditos devueltos."  paginator="true" rows="15" paginatorPosition="bottom">
                  <p:column selectionMode="multiple" style="width:35px;text-align:center"/>
                  <p:column headerText="Fecha devolucion" style="width:250px;" > 
                    <h:outputText value="#{dev.fecha}"/>
                  </p:column>
                  <p:column headerText="Estatus" style="width:100px;" > 
                    <h:outputText value="#{dev.estatus}"/>
                  </p:column>
                  <p:column headerText="Credito" style="width:150px;" > 
                    <h:outputText value="#{dev.numeroCredito}"/>
                  </p:column>
                  <p:column headerText="Deudor"> 
                    <h:outputText value="#{dev.nombreRazonSocial}"/>
                  </p:column>
                  <p:column headerText="Motivo" style="width:250px;" > 
                    <h:outputText value="#{dev.concepto}"/>
                  </p:column>
                  <p:column headerText="Solicitante" style="width:100px;" > 
                    <h:outputText value="#{dev.solicitante}"/>
                  </p:column>
                  <p:column headerText="Revisor" style="width:100px;" > 
                    <h:outputText value="#{dev.revisor}"/>
                  </p:column>
                  <f:facet name="footer">
                    <p:commandButton value="Reactivar seleccionados" icon="ui-icon-refresh" actionListener="#{devolucionBean.reactivar()}" update="growl, devueltos" />
                  </f:facet>
                </p:dataTable>
              </h:form>
            </div>
          </div>
        </div>
      </div>
    </div><!-- /main-container -->
    <!-- Footer ================================================== -->
    <ui:include src="barraInferior.xhtml" />
  </h:body>
</html>