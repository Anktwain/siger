<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns="http://www.w3.org/1999/xhtml">
  <h:head>
    <meta charset="utf-8"></meta>
  </h:head> 
  <body>
    <div class="clearfix">
      <div class="pull-left">
        <h:form id="formNuevaGestion">
          <h4>Gestionar credito</h4>
          <br />
          <strong>
            Tipo de gestion:
          </strong>
          <p:selectOneMenu id="tipoGestion" value="#{gestionBean.tipoSeleccionado.idTipoGestion}" style="width:200px" required="true" requiredMessage="Seleccione el tipo de gestion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaTipos}" var="tipos" itemLabel="#{tipos.nombre}" itemValue="#{tipos.idTipoGestion}" />
            <p:ajax update="dondeGestion" listener="#{gestionBean.preparaDonde()}" />
          </p:selectOneMenu>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <strong>
            Donde:
          </strong>
          <p:selectOneMenu id="dondeGestion" value="#{gestionBean.dondeSeleccionado.idDondeGestion}" style="width:250px" required="true" requiredMessage="Seleccione el lugar de la gestion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaDonde}" var="dondes" itemLabel="#{dondes.nombre}" itemValue="#{dondes.idDondeGestion}" />
            <p:ajax update="asuntoGestion" listener="#{gestionBean.preparaAsunto()}" />
          </p:selectOneMenu>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <strong>
            Asunto:
          </strong>
          <p:selectOneMenu id="asuntoGestion" value="#{gestionBean.asuntoSeleccionado.idAsuntoGestion}" style="width:250px" required="true" requiredMessage="Seleccione el asunto de la gestion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaAsuntos}" var="asuntos" itemLabel="#{asuntos.tipoAsuntoGestion.asunto}" itemValue="#{asuntos.idAsuntoGestion}" />
            <p:ajax update="descripcionGestion, tipoSujetoGestion" listener="#{gestionBean.preparaDescripcion()}" />
          </p:selectOneMenu>
          <br />
          <br />
          <strong>
            Descripcion Gestion:
          </strong>
          <p:selectOneMenu id="descripcionGestion" value="#{gestionBean.descripcionSeleccionada.idDescripcionGestion}" style="width:800px" required="true"  requiredMessage="Seleccione una descripcion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaDescripciones}" var="descripciones" itemLabel="#{descripciones.textoGestion}" itemValue="#{descripciones.idDescripcionGestion}" />
            <p:ajax update="tipoSujetoGestion, sujetoGestion, estatusInformativoGestion, gestion" listener="#{gestionBean.preparaTipoSujeto()}" />
          </p:selectOneMenu>
          <br />
          <br />
          <strong>
            Tipo de sujeto:
          </strong>
          <p:selectOneMenu id="tipoSujetoGestion" value="#{gestionBean.tipoSujetoSeleccionado.idTipoQuienGestion}" style="width:250px" required="true"  requiredMessage="Seleccione el tipo sujeto para la gestion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaTipoSujetos}" var="tipoSujetos" itemLabel="#{tipoSujetos.descripcion}" itemValue="#{tipoSujetos.idTipoQuienGestion}" />
            <p:ajax update="sujetoGestion" listener="#{gestionBean.preparaSujetos()}"/>
          </p:selectOneMenu>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <strong>
            Sujeto gestion:
          </strong>
          <p:selectOneMenu id="sujetoGestion" value="#{gestionBean.sujetoSeleccionado.idQuienGestion}" style="width:250px" required="true"  requiredMessage="Seleccione el sujeto de la gestion">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaSujetos}" var="sujetos" itemLabel="#{sujetos.quien}" itemValue="#{sujetos.idQuienGestion}" />
            <p:ajax update="estatusInformativoGestion" listener="#{gestionBean.preparaEstatus()}" />
          </p:selectOneMenu>
          <br />
          <br />
          <strong>
            Informacion para el banco:
          </strong>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <p:selectOneMenu id="estatusInformativoGestion" value="#{gestionBean.estatusSeleccionado.idEstatusInformativo}" style="width:250px" required="true"  requiredMessage="Seleccione la informacion para el banco">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{gestionBean.listaEstatus}"  var="e" itemLabel="#{e.estatus}" itemValue="#{e.idEstatusInformativo}"  />
          </p:selectOneMenu>
          <br />
          <br />
          <strong>
            Gestion:
          </strong>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <p:inputTextarea id="gestion" rows="2" cols="100" value="#{gestionBean.gestion}" required="true"  requiredMessage="Ingrese la gestion">
            <p:ajax event="keyup" />
          </p:inputTextarea>
          <br />
          <br />
          <p:commandButton value="Enviar gestion" actionListener="#{gestionBean.crearNuevaGestion()}" update="growl, formTablaMarcajes" />
        </h:form>
      </div>
    </div>
  </body>
</html>