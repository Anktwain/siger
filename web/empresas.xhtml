<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns="http://www.w3.org/1999/xhtml">
    <h:head>
        <meta charset="utf-8"></meta>
        <title>SigerWeb - Empresas</title>
        <link rel="shortcut icon" href="resources/img/icono.ico" type="image/x-icon" />
    </h:head> 
    <h:body>
        <div id="overlay" class="transparent" style="display: none;"></div>
        <ui:include src="barraSuperior.xhtml" />
        <ui:include src="barraLateral.xhtml" />
        <div id="main-container">
            <div id="breadcrumb">
                <ul class="breadcrumb">
                    <li>
                        <i class="fa fa-home">
                        </i>
                        <a href="panelAdministrativo.xhtml">Inicio</a>
                    </li>
                    <li class="active">
                        Empresas
                    </li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-tab clearfix">
                    <ul class="tab-bar">
                        <li><a href="#nueva" data-toggle="tab"><h2><i class="fa fa-plus"></i> Nueva empresa</h2></a></li>
                        <li><a href="#editar" data-toggle="tab"><h2><i class="fa fa-pencil"></i> Editar empresa</h2></a></li>
                    </ul>
                </div>
                <div class="panel-body">
                    <div class="tab-content">
                        <div class="tab-pane fade" id="nueva">
                            <h:form id="formNuevaEmpresa">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h4>Registre a una empresa en el sistema</h4>
                                    </div>
                                    <div class="modal-body">

                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </div><!-- /.modal-content -->
                            </h:form>
                        </div>
                        <div class="tab-pane fade" id="editar">
                            <h:form id="formEditarEmpresa">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h4>seleccione la empresa y de click en "Editar"</h4>
                                    </div>
                                    <div class="modal-body">
                                        <h:form>
                                            <p:dataTable id="editarEmpresa" var="sujeto" value="#{empresasBean.listaEmpresas}" rowKey="#{sujeto.rfc}" selection="#{empresasBean.empresa}" selectionMode="single" paginator="true" rows="10">
                                                <f:facet name="header">
                                                    Empresas registradas en el sistema
                                                </f:facet>
                                                <p:column headerText="Nombre de la empresa">
                                                    <p:outputLabel value="#{sujeto.nombreRazonSocial}" style="font-family: 'Open Sans',sans-serif; font-weight: 700;" />
                                                </p:column>
                                                <p:column headerText="RFC"> 
                                                    <h:outputText value="#{sujeto.rfc}" style="font-family: 'Open Sans',sans-serif; font-weight: 700;" />
                                                </p:column>
                                                <f:facet name="footer">
                                                    <p:commandButton process="editarEmpresa" icon="ui-icon-pencil" value="Editar" actionListener="#{empresasBean.guardarEmpresa}" update="modalEmpresaId, modalEditarId" oncomplete="PF('modalEmpresa').show();" />
                                                    <!-- update="modalEmpresaId" -->
                                                </f:facet>
                                            </p:dataTable>
                                        </h:form>
                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </div><!-- /.modal-content -->
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- /main-container -->
        <!-- Footer ================================================== -->
        <ui:include src="barraInferior.xhtml" />
        <!-- DIALOGOS -->
        <!-- DIALOGO DE DETALLE EMPRESAS -->
        <p:dialog id="modalEmpresaId" header="Detalle empresa" widgetVar="modalEmpresa" modal="true" resizable="false">
            <h:form>
                <p:outputLabel value="Razon social: " />
                <br />
                <p:outputLabel value="#{empresasBean.razonSocial}" style="font-family: 'Open Sans',sans-serif; font-weight: 700;" />
                <br />
                <p:outputLabel value="RFC: " />
                <br />
                <p:outputLabel value="#{empresasBean.auxRfc}" style="font-family: 'Open Sans',sans-serif; font-weight: 700;" />
                <br />
                <br />
                <p:commandButton value="Editar datos" type="button" onclick="PF('modalEditar').show();" />
                <br />
                <br />
                <p:commandButton value="Editar productos" type="button" onclick="PF('modalProductos').show();" />
                <br />
                <br />
                <p:commandButton value="Editar subproductos" type="button" onclick="PF('modalSubproductos').show();" />
                <br />
                <br />
                <p:commandButton value="Eliminar empresa" onclick="PF('modalEliminar').show();" />
            </h:form>
        </p:dialog>
        <!-- DIALOGO DE PRODUCTOS -->
        <p:dialog header="Productos de la empresa" widgetVar="modalProductos" modal="true" resizable="false">
            <h:outputText value="Dialogo de productos" />
        </p:dialog>
        <!-- DIALOGO DE SUBPRODUCTOS -->
        <p:dialog header="Subproductos de la empresa" widgetVar="modalSubproductos" modal="true" resizable="false">
            <h:outputText value="Dialogo de subproductos" />
        </p:dialog>
        <!-- DIALOGO DE EDITAR EMPRESA -->
        <p:dialog id="modalEditarId" header="Datos primarios de la empresa" widgetVar="modalEditar" modal="true" resizable="false">
            <f:facet name="header">
                <h:outputText value="Modifique los datos para esta empresa" />
            </f:facet>
            <h:outputText value="Razon Social:" />
            <br />
            <p:inputText value="#{empresasBean.razonSocial}" size="50" />
            <br />
            <br />
            <h:outputText value="RFC:" />
            <br />
            <p:inputText value="#{empresasBean.auxRfc}" size="25" />
            <br />
            <br />
            <h:outputText value="Nombre Corto:" />
            <br />
            <p:inputText value="#{empresasBean.corto}" size="25" />
            <f:facet name="footer">
                <p:commandButton value="Aceptar" actionListener="#{empresasBean.editarEmpresa}" />
            </f:facet>
        </p:dialog>
        <!-- DIALOGO DE ELIMINAR EMPRESA -->
        <p:dialog header="Eliminar empresa" widgetVar="modalEliminar" modal="true" resizable="false">
            <h:outputText value="Esta seguro de que desea eliminar a esta empresa?" />
        </p:dialog>
    </h:body>
</html>